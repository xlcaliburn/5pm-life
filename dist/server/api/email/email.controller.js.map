{"version":3,"sources":["api/email/email.controller.js"],"names":[],"mappings":"AAAA;;;;;QAkCgB,S,GAAA,S;;AAhChB;;;;;;AACA,IAAI,aAAa,QAAQ,YAAR,CAAjB;AACA,IAAI,iBAAiB,QAAQ,2BAAR,CAArB;;AAEA,SAAS,SAAT,CAAmB,aAAnB,EAAkC;AAC9B,YAAQ,GAAR,CAAY,6BAAZ,EAA2C,aAA3C;;;AAGA,QAAI,cAAc,WAAW,eAAX,CAA2B,eAAe;AACxD,iBAAS,OAD+C;AAExD,cAAM;AACF,kBAAM,uBADJ,E;AAEF,kBAAM;AAFJ;AAFkD,KAAf,CAA3B,CAAlB;;AAQA,QAAI,cAAc;AACd,cAAM,kCADQ,E;AAEd,YAAI,aAFU,E;AAGd,iBAAS,2BAHK,E;AAId,cAAM,8EAJQ,E;AAKd,cAAM,kI;AALQ,KAAlB;;AAQA,gBAAY,QAAZ,CAAqB,WAArB,EAAkC,UAAS,KAAT,EAAgB,IAAhB,EAAqB;AACnD,YAAI,KAAJ,EAAW;AACP,mBAAO,QAAQ,GAAR,CAAY,KAAZ,CAAP;AACH;AACD,gBAAQ,GAAR,CAAY,uBAAuB,aAAvB,GAAuC,QAAvC,GAAkD,KAAK,QAAnE;AACH,KALD;AAMH;;AAEM,SAAS,SAAT,CAAmB,GAAnB,EAAwB,GAAxB,EAA6B;AAChC,WAAO,gBAAM,MAAN,CAAa,IAAI,IAAjB,EACF,IADE,CACG,YAAW;AACb,kBAAU,IAAI,IAAJ,CAAS,aAAnB;AACA,YAAI,IAAJ,CAAS,EAAE,QAAQ,SAAV,EAAT;AACH,KAJE,CAAP;AAKH","file":"api/email/email.controller.js","sourcesContent":["'use strict';\r\n\r\nimport Email from './email.model';\r\nvar nodemailer = require(\"nodemailer\");\r\nvar smtp_transport = require('nodemailer-smtp-transport');\r\n\r\nfunction sendEmail(email_address) {\r\n    console.log('Attempting to send email to', email_address);\r\n\r\n    // trying nodemailer\r\n    var transporter = nodemailer.createTransport(smtp_transport({\r\n        service: 'gmail',\r\n        auth: {\r\n            user: 'fivepm.life@gmail.com', // my mail\r\n            pass: 'fivepm4life'\r\n        }\r\n    }));\r\n\r\n    var mailOptions = {\r\n        from: '5PM.life <fivepm.life@gmail.com>', // sender address\r\n        to: email_address, // the same mail = want to send it to myself\r\n        subject: 'Thank you for signing up!', // Subject line\r\n        text: 'Thank you for signing up for our BETA. You will hear back from us very soon!', // plaintext body\r\n        html: '<b>Thank you</b><p>Thank you for signing up for our BETA. You will hear back from us very soon!</p><p>Sincerely,<br>5PM Team</p>' // html body\r\n    };\r\n\r\n    transporter.sendMail(mailOptions, function(error, info){\r\n        if (error) {\r\n            return console.log(error);\r\n        }\r\n        console.log('Message sent to : ' + email_address + ' with ' + info.response);\r\n    });\r\n}\r\n\r\nexport function saveEmail(req, res) {\r\n    return Email.create(req.body)\r\n        .then(function() {\r\n            sendEmail(req.body.email_address);\r\n            res.json({ status: \"success\" });\r\n        });\r\n}\r\n"],"sourceRoot":"/source/"}