{"version":3,"sources":["api/venues/routes.js"],"names":[],"mappings":";;AAAA;;AAEA,IAAI,WAAW,QAAQ,UAAR,CAAf;;AAEA,IAAI,QAAQ,SAAS,KAAT,CAAe,OAAf,CAAZ;AACA,IAAI,QAAQ,SAAS,KAAT,CAAe,OAAf,CAAZ;;AAEA,IAAI,OAAS,MAAM,IAAN,CAAW,EAAC,MAAO,KAAR,EAAX,CAAb;AACA,IAAI,WAAY,MAAM,IAAN,CAAW,EAAC,MAAO,UAAR,EAAX,CAAhB;;AAEA,IAAI,SAAS,qBAAb;AACA,OAAO,GAAP,CAAW,GAAX,EAAgB,UAAS,GAAT,EAAa,GAAb,EAAkB;AAChC,OAAM,IAAN,CAAW,UAAS,GAAT,EAAc,IAAd,EAAoB;AAC9B,MAAI,GAAJ,EACC,IAAI,IAAJ,CAAS,GAAT;;AAED,MAAI,IAAJ,CAAS,IAAT;AACA,EALD;AAMA,CAPF;;AASA,OAAO,IAAP,CAAY,GAAZ,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB;AAClC,OAAM,MAAN,CAAa;AACZ,QAAO,IAAI,IAAJ,CAAS,IADJ;AAEZ,cAAa,IAAI,IAAJ,CAAS,UAFV;AAGZ,WAAS;AACR,WAAQ,IAAI,IAAJ,CAAS,MADT;AAER,SAAM,IAAI,IAAJ,CAAS,IAFP;AAGR,aAAU,IAAI,IAAJ,CAAS,QAHX;AAIR,gBAAa,IAAI,IAAJ,CAAS;AAJd;AAHG,EAAb,EASI,UAAS,GAAT,EAAc,IAAd,EAAoB;AACvB,MAAI,GAAJ,EACC,IAAI,IAAJ,CAAS,GAAT;;AAED,QAAM,IAAN,CAAW,UAAS,GAAT,EAAc,IAAd,EAAoB;AAC9B,OAAI,GAAJ,EACC,IAAI,IAAJ,CAAS,GAAT;AACD,OAAI,IAAJ,CAAS,IAAT;AACA,GAJD;AAKA,EAlBD;AAmBA,CApBF;;AAsBA,OAAO,MAAP,CAAc,YAAd,EAA4B,UAAS,GAAT,EAAc,GAAd,EAAmB;AAC7C,OAAM,MAAN,CAAa;AACZ,OAAM,IAAI,MAAJ,CAAW;AADL,EAAb,EAEG,UAAS,GAAT,EAAc,IAAd,EAAoB;AACtB,MAAI,GAAJ,EACC,IAAI,IAAJ,CAAS,GAAT;;;AAGD,QAAM,IAAN,CAAW,UAAS,GAAT,EAAc,IAAd,EAAoB;AAC9B,OAAI,GAAJ,EACC,IAAI,IAAJ,CAAS,GAAT;AACD,OAAI,IAAJ,CAAS,IAAT;AACA,GAJD;AAKA,EAZD;AAaA,CAdF;;AAgBA,OAAO,OAAP,GAAiB,MAAjB","file":"api/venues/routes.js","sourcesContent":["import {Router} from 'express';\r\n\r\nvar mongoose = require('mongoose');\r\n\r\nvar Venue = mongoose.model('Venue');\r\nvar Enums = mongoose.model('Enums');\r\n\r\nvar Tags \t\t= Enums.find({type : 'tag'});\r\nvar Activity \t= Enums.find({type : 'activity'});\r\n\r\nvar router = new Router();\r\nrouter.get('/', function(req,res) {\r\n\t\tVenue.find(function(err, data) {\r\n\t\t\tif (err)\r\n\t\t\t\tres.send(err);\r\n\r\n\t\t\tres.json(data);\r\n\t\t});\r\n\t});\r\n\r\nrouter.post('/', function(req, res) {\r\n\t\tVenue.create({\r\n\t\t\ttags : req.body.tags,\r\n\t\t\tvenue_name : req.body.venue_name,\r\n\t\t\taddress: {\r\n\t\t\t\tstreet: req.body.street,\r\n\t\t\t\tcity: req.body.city,\r\n\t\t\t\tprovince: req.body.province,\r\n\t\t\t\tpostal_code: req.body.postal_code\r\n\t\t\t}\r\n\t\t }, function(err, data) {\r\n\t\t\tif (err)\r\n\t\t\t\tres.send(err);\r\n\r\n\t\t\tVenue.find(function(err, data) {\r\n\t\t\t\tif (err)\r\n\t\t\t\t\tres.send(err)\r\n\t\t\t\tres.json(data);\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\nrouter.delete('/:venue_id', function(req, res) {\r\n\t\tVenue.remove({\r\n\t\t\t_id : req.params.venue_id\r\n\t\t}, function(err, data) {\r\n\t\t\tif (err)\r\n\t\t\t\tres.send(err);\r\n\r\n\t\t\t// get and return all the todos after you create another\r\n\t\t\tVenue.find(function(err, data) {\r\n\t\t\t\tif (err)\r\n\t\t\t\t\tres.send(err)\r\n\t\t\t\tres.json(data);\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\nmodule.exports = router;"],"sourceRoot":"/source/"}